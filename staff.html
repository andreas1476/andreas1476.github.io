<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <title>Resident RP â€“ Staff Panel</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<section>
    <h2>Whitelist â€“ Staff Panel</h2>
    <p class="section-text">
        Status gemmes lokalt pÃ¥ din computer.
    </p>

    <div id="applications" class="features"></div>
</section>

<script>
const responseWebhook = "INDSÃ†T_SVAR_WEBHOOK_URL_HER";

const applications = [
    {
        id: 1,
        discord: "User#1234",
        age: 19,
        experience: "2 Ã¥rs seriÃ¸s RP",
        character: "Civil mekaniker",
        status: "Afventer"
    }
];

function getStatus(id) {
    return localStorage.getItem("app_" + id) || "Afventer";
}

function setStatus(id, status) {
    localStorage.setItem("app_" + id, status);
}

function sendDiscordResponse(app, status) {
    const color =
        status === "Godkendt" ? 3066993 :
        status === "Afvist" ? 15158332 :
        15105570;

    const message = {
        embeds: [{
            title: "ðŸ“‹ Whitelist-ansÃ¸gning behandlet",
            color: color,
            fields: [
                { name: "Discord", value: app.discord },
                { name: "Resultat", value: status },
                { name: "Karakter", value: app.character }
            ],
            footer: { text: "Resident RP Staff" }
        }]
    };

    fetch(responseWebhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(message)
    });
}

function handleDecision(id, status) {
    const app = applications.find(a => a.id === id);
    setStatus(id, status);
    sendDiscordResponse(app, status);
    render();
}

function render() {
    const container = document.getElementById("applications");
    container.innerHTML = "";

    applications.forEach(app => {
        const status = getStatus(app.id);

        const div = document.createElement("div");
        div.className = "feature";

        div.innerHTML = `
            <h3>${app.discord}</h3>
            <p><strong>Alder:</strong> ${app.age}</p>
            <p><strong>RP:</strong> ${app.experience}</p>
            <p><strong>Karakter:</strong> ${app.character}</p>
            <p><strong>Status:</strong>
                <span class="status ${status}">
                    ${status}
                </span>
            </p>

            <div style="margin-top:1rem; display:flex; gap:1rem;">
                <button class="btn btn-primary"
                    onclick="handleDecision(${app.id}, 'Godkendt')">
                    Godkend
                </button>
                <button class="btn btn-secondary"
                    onclick="handleDecision(${app.id}, 'Afvist')">
                    Afvis
                </button>
            </div>
        `;
        container.appendChild(div);
    });
}

render();
</script>
